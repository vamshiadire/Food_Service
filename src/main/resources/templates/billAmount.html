<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bills</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"/>
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Bill Management</h2>
         <!-- Display success message -->
	    <div th:if="${successMessage}" style="color: green;">
	        <p th:text="${successMessage}"></p>
	    </div>
	    
	    
	    <a href="/admin/list" class="btn btn-primary">List of All Employees</a>

        <form th:action="@{/admin/bills/add}" method="post" class="mb-3">
            <div class="mb-3">
                <label for="waiterName" class="form-label">Waiter Name</label>
                <input type="text" id="waiterName" name="waiterName" class="form-control" required />
           
                <label for="item" class="form-label">Item</label>
                <input type="text" id="item" name="item" class="form-control" required />
        
                <label for="amount" class="form-label">Amount</label>
                <input type="number" id="amount" name="amount" class="form-control" required />
            </div>
            <button type="submit" class="btn btn-primary">Add Bill</button>
        </form>
        
        <h3>Filter Bills by Waiter</h3>
        <!--  
        <form th:action="@{/admin/bills/filter}" method="post" class="mb-4">
            <div class="mb-3">
                <label for="filterWaiterName" class="form-label">Waiter Name</label>
                <input type="text" id="filterWaiterName" name="waiterName" class="form-control" required />
            </div>
            <button type="submit" class="btn btn-secondary">Filter</button>
        </form>
        -->
        <form action="#" th:action="@{/admin/bills}" method="get">
	        <input type="text" name="waiterName" placeholder="Enter Waiter Name" th:value="${waiterName}"/>
	        <button type="submit">Filter</button>
	        <button type="button" th:if="${filterApplied}" 
	                onclick="window.location.href='@{/admin/bills}';">Remove Filter</button>
   		 </form>

        <h3>Bill List</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Bill ID</th>
                    <th>Waiter Name</th>
                    <th>Item</th>
                    <th>Amount</th>
                    <th>Date & Time</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="bill : ${bills}">
                    <td th:text="${bill.billId}"></td>
                    <td th:text="${bill.waiterName}"></td>
                    <td th:text="${bill.item}"></td>
                    <td th:text="${bill.amount}"></td> 
                    <td th:text="${bill.dateTime}"></td>     
                </tr>
            </tbody>
        </table>

        <h4>Total Amount: <span th:text="${totalAmount}"></span></h4>
    </div>

 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    
</body>
</html>